@using BLL.ModelVM.Order
@model CreateOrderVM
@{
    ViewData["Title"] = "Checkout";
    Layout = "~/Views/Shared/_Layout.cshtml";
    decimal total = 0;
}

<!-- Checkout Page Start -->
<div class="container-fluid py-5">
    <div class="container py-5">
        <h1 class="mb-4">Billing details</h1>
        <form asp-action="Index" asp-controller="Checkout" method="post">
            <div class="row g-5">
                <div class="col-md-12 col-lg-6 col-xl-7">
                    <div class="row">
                        <div class="col-md-12 col-lg-6">
                            <div class="form-item w-100">
                                <label class="form-label my-3">First Name<sup>*</sup></label>
                                <input asp-for="FirstName" class="form-control" />
                                <span asp-validation-for="FirstName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-6">
                            <div class="form-item w-100">
                                <label class="form-label my-3">Last Name<sup>*</sup></label>
                                <input asp-for="LastName" class="form-control" />
                                <span asp-validation-for="LastName" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="form-item">
                        <label class="form-label my-3">Address<sup>*</sup></label>
                        <input asp-for="Street" class="form-control" />
                        <span asp-validation-for="Street" class="text-danger"></span>
                    </div>
                    <div class="form-item">
                        <label class="form-label my-3">Town/City<sup>*</sup></label>
                        <input asp-for="City" class="form-control" />
                        <span asp-validation-for="City" class="text-danger"></span>
                    </div>
                    <div class="form-item">
                        <label class="form-label my-3">Mobile<sup>*</sup></label>
                        <input asp-for="PhoneNumber" class="form-control" />
                        <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                    </div>
                    <div class="form-item">
                        <label class="form-label my-3">Payment Method<sup>*</sup></label>
                        <select asp-for="PaymentMethod" class="form-control">
                            <option value="">-- Select Payment Method --</option>
                            <option value="CashOnDelivery">Cash On Delivery</option>
                            <option value="BankTransfer">Bank Transfer</option>
                            <option value="Paypal">Paypal</option>
                        </select>
                        <span asp-validation-for="PaymentMethod" class="text-danger"></span>
                    </div>
                </div>

                <div class="col-md-12 col-lg-6 col-xl-5">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Image</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Qty</th>
                                    <th scope="col">Subtotal</th>
                                </tr>
                            </thead>
                            <tbody>                                
                                @if (Model.Products == null || !Model.Products.Any())
                                {
                                    <p>Your cart is empty.</p>
                                }
                                else
                                {
                                    @foreach (var item in Model.Products)
                                    {
                                        total += item.Total;
                                        <tr>
                                        <td>
                                            <img src="~/img/Products/@item.Imagepath" class="img-fluid rounded-circle" style="width: 90px; height: 90px;" />
                                        </td>
                                        <td class="py-5">@item.Name</td>
                                        <td class="py-5">@item.UnitPrice.ToString("C")</td>
                                        <td class="py-5">@item.Quantity</td>
                                        <td class="py-5">@item.Total.ToString("C")</td>
                                    </tr>
                                }
                                }
                                <tr>
                                    <td colspan="4" class="text-end py-4"><strong>Total:</strong></td>
                                    <td class="py-4">@(total.ToString("C"))</td>

                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="row g-4 text-center pt-4">
                        <div class="col-12">
                            <button type="submit" class="btn btn-primary w-100 py-3 px-4 text-uppercase">Place Order</button>
                        </div>
                    </div>
                </div>

            </div>
        </form>
    </div>
</div>
<!-- Checkout Page End -->
@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")
}
